<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue + TinyMCE 測試 || 曉陽</title>

    <style>



    .btn{
        cursor: pointer;
        padding: 12px 24px;
        border:none;
        font-size: 2rem;
        border-radius: 5px;
        box-shadow: 1px 1px 2px black;
    }


    </style>
</head>

<body>
    <div id="app">
        <h2 style="margin-bottom: 0;">隨意複製word的內容試試看</h2>
        <span>※這個插件<span style="color:red">保留word格式的功能是要付費的</span>(而且非常貴)，目前還有2個禮拜的試用期(到5/22)。有找到別的可以的插件，但設定比較難搞，目前就是證明可行性而已，還需要點時間...</span>

        <textarea id="editor"></textarea>
        <br>
        <button class="btn" @click="getContent">發文</button>

        <h3>文章結果：</h3>
        <div v-html="content" style="border:1px solid #ccc; padding: 1em;"></div>
    </div>




    <script src="https://cdn.tiny.cloud/1/s1anekwuozczgnqi666i7a7h8h76hkzgwfdtlbdgvkgy2zdu/tinymce/7/tinymce.min.js"
        referrerpolicy="origin"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>


    <script>
        const { createApp, ref, onMounted } = Vue

        createApp({
            setup() {
                const content = ref('')

                const getContent = () => {
                    content.value = tinymce.get('editor').getContent()
                    console.log('取得內容:', content.value)
                }

                onMounted(() => {
                    tinymce.init({
                        selector: 'textarea',
                        plugins: [
                            // Core editing features
                            'anchor', 'autolink', 'charmap', 'codesample', 'emoticons', 'image', 'link', 'lists', 'media', 'searchreplace', 'table', 'visualblocks', 'wordcount',
                            // Your account includes a free trial of TinyMCE premium features
                            // Try the most popular premium features until May 22, 2025:
                            'checklist', 'mediaembed', 'casechange', 'formatpainter', 'pageembed', 'a11ychecker', 'tinymcespellchecker', 'permanentpen', 'advtable', 'advcode', 'editimage', 'advtemplate', 'ai', 'mentions', 'tinycomments', 'tableofcontents', 'footnotes', 'mergetags', 'autocorrect', 'typography', 'inlinecss', 'markdown', 'importword', 'exportword', 'exportpdf','powerpaste'
                        ],
                        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat | alignleft aligncenter alignright | image | code',


                        file_picker_types: 'image',
                        file_picker_callback: function (callback, value, meta) {
                            if (meta.filetype === 'image') {
                                const input = document.createElement('input');
                                input.setAttribute('type', 'file');
                                input.setAttribute('accept', 'image/*');

                                input.onchange = function () {
                                    const file = this.files[0];
                                    const reader = new FileReader();

                                    reader.onload = function () {
                                        const base64 = reader.result;
                                        callback(base64, { alt: file.name });
                                    };
                                    reader.readAsDataURL(file);
                                };

                                input.click();
                            }
                        },
                        tinycomments_mode: 'embedded',
                        tinycomments_author: 'Author name',
                        mergetags_list: [
                            { value: 'First.Name', title: 'First Name' },
                            { value: 'Email', title: 'Email' },
                        ],
                        ai_request: (request, respondWith) => respondWith.string(() => Promise.reject('See docs to implement AI Assistant')),
                    });
                })

                return {
                    content,
                    getContent
                }
            }
        }).mount('#app')
    </script>



</body>

</html>